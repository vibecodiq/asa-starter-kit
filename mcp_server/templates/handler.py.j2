"""{{ slice_name | to_camel_case }} Handler"""
from fastapi import APIRouter, HTTPException, status
from .schemas import {{ slice_name | to_camel_case }}Request, {{ slice_name | to_camel_case }}Response
from .service import {{ slice_name | to_camel_case }}Service

router = APIRouter(prefix="/api/v1/{{ domain }}", tags=["{{ domain }}"])
service = {{ slice_name | to_camel_case }}Service()


@router.post("/{{ slice_name }}", response_model={{ slice_name | to_camel_case }}Response)
async def {{ slice_name }}(request: {{ slice_name | to_camel_case }}Request):
    """
    {{ slice_name | to_camel_case }} endpoint.

    TODO: Add description
    """
    result = await service.execute(request)

    if result is None:
        raise HTTPException(
            status_code=status.HTTP_400_BAD_REQUEST,
            detail="Operation failed"
        )

    return result
